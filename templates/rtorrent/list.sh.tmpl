#!/bin/sh

#### VARs
# DO NOT MODIFY
FilesList="$HOME/scripts/files_cron.list"
get_base_path="$1"
get_custom1="$2"
get_name="$3"
get_loaded_file="$4"
# DO NOT MODIFY

# Filter by category
# Use of cron script OR direct script
Line="$get_custom1$get_name"
get_name_escaped="`echo $get_name | sed s,/,\\\\\\\\\\/,g`"
Tree="`echo $Line | sed "s/$get_name_escaped//g;"`"
CountSlash=`echo $Tree | awk -F "/" '{print NF-1}'`
CategoryDir="`echo $Tree | awk '{split($0,a,"/"); print a['$CountSlash']}'`"

# You must list your categories here (subfolders added in MySB options on portal)
# Only this category will be synchronise and added to the list
# Or let it like follow for synchronised all your files
case "$CategoryDir" in
	*)
		# The current download is added to the list
		echo "$get_base_path|$get_custom1|$get_name|$get_loaded_file|$CategoryDir" >> $FilesList
	;;
esac
